<!DOCTYPE html>
<html>
<head>
  <title>nikke slot machine</title>
  <link href="./css/style.css" rel="stylesheet">
</head>
<body align="center">
  <h1><블랑과 누아르가 함께하는 행운의 슬롯머신 히히></h1>
    <div class="cont">
      <div class="bunny">
        <img id="blanc" src="./resource/c270_00.png">
        <img onmouseover="this.src='./resource/push.png'" onmouseout="this.src='./resource/standing.png'" onclick="startSlotMachine();" id="noir" src="./resource/standing.png">   
      </div>

      <div class="slot-container">
        <div class="slot" id="slot1"></div>
        <div class="slot" id="slot2"></div>
        <div class="slot" id="slot3"></div>
      </div>
    </div>

    <script>

      function startSlotMachine() {
        
        document.getElementById('noir').setAttribute('onclick',"st()")
        
        var slot1 = document.getElementById('slot1');
        var slot2 = document.getElementById('slot2');
        var slot3 = document.getElementById('slot3');

      var count = 0;
      var maxCount = 10; // 몇 번 돌릴지 설정
      var intervalIds = []; // 각 슬롯의 setInterval ID를 저장하는 배열

      var slotValues = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]; // 슬롯에 표시될 숫자 배열

      // 각 슬롯을 돌리는 함수
      function spinSlot(slot, index) {
        slot.textContent = slotValues[index % slotValues.length];
      }

      // 각 슬롯별로 돌리기 시작
      intervalIds[0] = setInterval(function() {
        spinSlot(slot1, count);
        count++;
      }, 70);
      intervalIds[1] = setInterval(function() {
        spinSlot(slot2, count);
        count++;
      }, 70);
      intervalIds[2] = setInterval(function() {
        spinSlot(slot3, count);
        count++;
      }, 70);
    
    // 슬롯을 멈추는 함수
    function stopSlot(slotIndex) {
      clearInterval(intervalIds[slotIndex]);

      // 해당 슬롯을 멈춤 상태로 표시
      if (slotIndex === 0) {
        slot1Stopped = true;
      } else if (slotIndex === 1) {
        slot2Stopped = true;
      } else if (slotIndex === 2) {
        slot3Stopped = true;
      }
      if(stoped == 2) {
        getresult();
      }
    }
    
    function getresult() {
      alert("결과:"+slot1.textContent+","+slot2.textContent+","+slot3.textContent)
      
      document.getElementById('noir').setAttribute('onclick','startSlotMachine()')
    }

    // 슬롯 멈추기 버튼을 클릭하면 슬롯을 하나씩 멈춤
    var stoped = 0
    
    document.getElementById('noir').onclick = function () {
      stopSlot(stoped);
      stoped++;
    };
  }
</script>
</body>
</html>