<!DOCTYPE html>
<html>
<head>
  <title>nikke slot machine</title>
  <link href="./css/style.css" rel="stylesheet">
</head>
<body align="center">
  <h1><블랑과 누아르가 함께하는 행운의 슬롯머신></h1>
    <div class="cont">
      <div class="bunny">
        <img id="blanc" src="./resource/c270_00.png">
        <img id="noir" src="./resource/c271_00.png">   
      </div>

      <div class="slot-container">
        <div class="slot" id="slot1"></div>
        <div class="slot" id="slot2"></div>
        <div class="slot" id="slot3"></div>
      </div>
    </div>


    <button onclick="startSlotMachine()">Start</button><br>
    <button id="stopbtn">Stop</button>

    <script>
      function getRandomNumber() {
        var sn = 1
        if (sn > 10) {
        sn=1
        }else {
        sn++;
        return sn;
        }

      }

      function startSlotMachine() {
        var slot1 = document.getElementById('slot1');
        var slot2 = document.getElementById('slot2');
        var slot3 = document.getElementById('slot3');

        var count = 0;
    var maxCount = 10; // 몇 번 돌릴지 설정
    var intervalIds = []; // 각 슬롯의 setInterval ID를 저장하는 배열

    // 슬롯 멈춤 상태를 나타내는 변수들
    var slot1Stopped = false;
    var slot2Stopped = false;
    var slot3Stopped = false;

    // 각 슬롯을 돌리는 함수
    function spinSlot(slot, stoppedFlag) {
      if (!stoppedFlag) {
        slot.textContent = getRandomNumber();
      }
    }

    // 각 슬롯별로 돌리기 시작
    intervalIds[0] = setInterval(function() {
      spinSlot(slot1, slot1Stopped);
    }, 50);
    intervalIds[1] = setInterval(function() {
      spinSlot(slot2, slot2Stopped);
    }, 50);
    intervalIds[2] = setInterval(function() {
      spinSlot(slot3, slot3Stopped);
    }, 50);

    // 슬롯을 멈추는 함수
    function stopSlot(slotIndex) {
      clearInterval(intervalIds[slotIndex]);

      // 해당 슬롯을 멈춤 상태로 표시
      if (slotIndex === 0) {
        slot1Stopped = true;
      } else if (slotIndex === 1) {
        slot2Stopped = true;
      } else if (slotIndex === 2) {
        slot3Stopped = true;
      }

      checkResult();
    }

    // 슬롯 멈추기 버튼을 클릭하면 슬롯을 하나씩 멈춤
    var stoped = 0
    
    document.getElementById('stopbtn').onclick = function() {
      stopSlot(stoped);
      stoped++;
    };

    // 결과를 확인하는 함수
    function checkResult() {
      if (slot1Stopped && slot2Stopped && slot3Stopped) {
        alert('결과: ' + slot1.textContent + ', ' + slot2.textContent + ', ' + slot3.textContent);
      }
    }
  }
</script>
</body>
</html>